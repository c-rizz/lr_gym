

<!-- Launches gazebo with the cartpole environment loaded and
     all the nodes necessary to control and monitor the cartpole
     via ROS.
-->
<launch>
    <env name="ROSCONSOLE_FORMAT" value="[${severity}] [${walltime}] [${node}]: ${message}" />

    <arg name="gui" default="true"/>
    <arg name="noplugin" default="false"/>
    <arg name="model_file" default=""/>
    <arg name="xacro" default="false"/>
    <arg name="model_name" default=""/> <!-- must correspond with the robot name in the urdf/xacro file -->
    <arg name="paused" default="true"/> <!-- must correspond with the robot name in the urdf/xacro file -->

    <group if="$(arg noplugin)">
      <include file="$(find gazebo_ros)/launch/empty_world.launch" >
          <arg name="paused" value="$(arg paused)"/>
          <arg name="world_name" value="$(find gazebo_gym)/worlds/fixed_camera_world.world"/>
          <arg name="verbose" value="True"/>
          <arg name="physics" value="bullet"/>
          <arg name="gui" value="$(arg gui)"/>
          <arg name="extre_gazebo_args" value="--seed 20200413"/>

          <env name="GAZEBO_MODEL_PATH" value="$(find gazebo_gym)/models:$(optenv GAZEBO_MODEL_PATH)"/>
      </include>
    </group>
    <group unless="$(arg noplugin)">
      <!-- launch the custom world -->
      <include file="$(find gazebo_ros)/launch/empty_world.launch" >
          <arg name="paused" value="$(arg paused)"/>
          <arg name="world_name" value="$(find gazebo_gym)/worlds/fixed_camera_world_plugin.world"/>
          <arg name="verbose" value="True"/>
          <!--<arg name="physics" value="bullet"/>-->
          <arg name="gui" value="$(arg gui)"/>

          <env name="GAZEBO_MODEL_PATH" value="$(find gazebo_gym)/models:$(optenv GAZEBO_MODEL_PATH)"/>
      </include>
    </group>


    <group unless="$(eval model_name == '')">
      <!-- publish the model URDF on the parameter server -->
      <group unless="$(arg xacro)">
        <param name="$(arg model_name)_robot_description" command="cat $(arg model_file)" />
      </group>
      <group if="$(arg xacro)">
        <param name="$(arg model_name)_robot_description"  command="xacro --inorder $(arg model_file)" />
      </group>

      <!-- spawn in gazebo using the model description in the parameter server (when gazebo starts) -->
      <node name="spawn_model" pkg="gazebo_ros" type="spawn_model" respawn="false"
            output="screen" args="-param $(arg model_name)_robot_description -urdf -x 0 -y 0 -z 0 -model $(arg model_name)" />

      <!--
      <node name="robot_state_publisher_cartpole_v0" pkg="robot_state_publisher" type="robot_state_publisher"
            respawn="false" output="screen">
                <param name="publish_frequency" type="double" value="5000.0" />
                <param name="ignore_timestamp" type="bool" value="true" />
                <param name="tf_prefix" type="string" value="cartpole_v0" />
                <remap from="/joint_states" to="/cartpole_v0/joint_states" />
      </node>
      -->
    </group>


</launch>
